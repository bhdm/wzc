{% extends "WzcMainBundle::layout.html.twig" %}


{% block header %}
    <title>{{ page.title }}</title>
    <META NAME="Keywords" CONTENT="{{ page.keywords | raw}}">
    <META NAME="Description" CONTENT="{{ page.description  | raw }}">
{% endblock %}

{% block stylesheets %}
    <script src="{{ asset('bundles/wzcmain/js/jquery.form.js') }}"></script>
    {{ parent() }}
    <style>
        .content{
            padding: 50px 0 30px 0;
            width: 900px;
            margin: 0 auto;
        }
        h2{
            color: #920055;
            font-size: 30px;
            text-transform: uppercase;
        }
        input.styler{
            /*width: 510px*/
        }
        .table{
            width: 600px;
            margin: 0 auto;
        }
        .question{
            font-weight: bold;
            color: #920055;
            padding: 5px;
        }
        .answer{
            margin-left: 30px;
            padding: 5px;
        }
        .textarea{
            width: 450px;
            height: 150px;
        }
        .test{
            min-width: 500px;
        }
        /*.test button{*/
            /*margin-left: 375px;*/
        /*}*/
        h1{
            color: #920055;
            font-size: 20px !important;
            text-transform: uppercase;
            font-weight: normal;
        }
    </style>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        $(document).ready(function(){
            var cc = 1;

            $('.next').click(function(){
                if ($("input:radio:checked").length > 0){
                    var items = [];
                    $("input:checkbox:checked").each(function(item){
                        items.push(item.attr('name'));
                    });
                    cc ++;
                    if ( cc >= 8){
                        $('.next').fadeOut();
                    }
                    $("#form_question").ajaxSubmit({
                        url: Routing.generate('test_next', { questionId: $('#questionId').val() }),
                        type: 'post',
                        success: function (msg){
                            $('select').styler();
                            $('.styler').styler();
                            $('#form_question').html(msg);
                        }
                    });
                }else{
                    $('.test-error').html('<div style="color: #CC3333">Выберите вариант ответа</div><br />');
                }
            });
        });
    </script>
{% endblock %}

{% block content %}
    <div class="content">
        <h2>{{ page.title  | raw }}</h2>
        <br />
        <h1>Тест на болезнь Крона</h1>
        <br />
        <br />
        {{ page.body  | raw }}
        <br />
        <div class="test">
            {#{% for t in test %}#}
            <div class="test-error"></div>
            <form method="POST" id="form_question">
                <div class="question">{{ question.title | raw }}</div>
                <div class="question-body">{{ question.body | raw}}</div>
                <input type="hidden" id="questionId" value="{{ question.id }}">
                {% if question.isText == 1 %}
                    <div class="answer"><textarea class="styler textarea"></textarea></div>
                {% else %}
                    {% for a in question.answers %}
                        <div class="answer">
                            <input type="radio" class="styler check" name="answer" value="{{ a.priority }}"> {{ a.title }}
                        </div>
                    {% else %}
                        нету вариентов ответа
                    {% endfor %}
                {% endif %}
            </form>
            {#{% endfor %}#}
            <br />
            <button class="cbtn next">Далее</button>
        </div>
        <br style="clear: both"/>
    </div>
{% endblock %}